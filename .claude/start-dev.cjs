#!/usr/bin/env node
/**
 * Development Startup Script
 * Auto-generated by init-dev-environment.js
 */

const { spawn } = require('child_process');
const { execSync } = require('child_process');

console.log('ðŸš€ Starting FormFlowAI Development Environment...');

// Kill any existing processes on development ports
try {
    execSync('taskkill //f //im node.exe', { stdio: 'ignore' });
} catch (e) {
    // Ignore errors
}

// Start backend
console.log('ðŸ”§ Starting Backend Server...');
const backend = spawn('npm', ['run', 'dev:backend'], {
    cwd: process.cwd(),
    stdio: ['pipe', 'pipe', 'pipe'],
    shell: true
});

backend.stdout.on('data', (data) => {
    console.log('[Backend]', data.toString());
});

backend.stderr.on('data', (data) => {
    console.error('[Backend Error]', data.toString());
});

// Wait a bit for backend to start, then start frontend
setTimeout(() => {
    console.log('ðŸŽ¨ Starting Frontend Server...');
    const frontend = spawn('npm', ['run', 'dev'], {
        cwd: process.cwd(),
        stdio: ['pipe', 'pipe', 'pipe'],
        shell: true
    });

    frontend.stdout.on('data', (data) => {
        console.log('[Frontend]', data.toString());
    });

    frontend.stderr.on('data', (data) => {
        console.error('[Frontend Error]', data.toString());
    });
}, 5000);

console.log('âœ… Development servers starting...');
console.log('ðŸ“± Frontend: http://localhost:5173');
console.log('ðŸ”§ Backend: http://localhost:3000');
console.log('ðŸ’¾ Backend Health: http://localhost:3000/health');
